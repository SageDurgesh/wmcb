@using Newtonsoft.Json;
@model wmcb.model.View.MatchScoreView
@{
    ViewBag.Title = "Match Score";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script src="~/Scripts/angular/controllers/MatchScoreController.js"></script>
<div ng-controller="MatchScoreCtrl" ng-init="init(@JsonConvert.SerializeObject(Model.hasPermission),@Model.TeamID)">
    <h4>Enter Match Score</h4>
    <div ng-show="done">
        <h4>  {{displaymessage}}</h4>
    </div>
    <div ng-show="!done">
        <div>
            Select a Match :
            <div class="btn-group" dropdown>
                <button type="button" class="btn btn-warning">{{SelectedMatchText}}</button>
                <button type="button" class="btn btn-warning dropdown-toggle" dropdown-toggle>
                    <span class="caret"></span>
                    <span class="sr-only">Split button!</span>
                </button>
                <ul class="dropdown-menu" role="menu">
                    <li ng-repeat="m in AgainstTeams"><a href="#" ng-click="SelectMatch(m)">Vs {{m.AgainstTeamName}} - {{m.DateTime| date:'EEE , MM/dd'}}</a></li>
                </ul>
            </div>
        </div>
        <div ng-hide="SelectedMatch==''">
            <div class="row">
                <div class="col-lg-4 col-md-4"><div>Did @Model.TeamName win the toss?</div>
                    <div class="form-group row">
                       
                        <div class="radio">
                            <label>
                                <input type="radio" name="toss" value="1" ng-model="toss">
                                Yes
                            </label>
                        </div>
                        <div class="radio">
                            <label>
                                <input type="radio" name="toss" value="0" ng-model="toss">
                                No
                            </label>
                        </div>
                    </div>
                </div>
                <div><div>Did @Model.TeamName bat first?</div>
                    <div class="form-group">
                        
                        <div class="radio">
                            <label>
                                <input type="radio" name="batfirst" value="1" ng-model="batfirst">
                                Yes
                            </label>
                        </div>
                        <div class="radio">
                            <label>
                                <input type="radio" name="batfirst" value="0" ng-model="batfirst">
                                No
                            </label>
                        </div>
                    </div>
                </div>
            </div>


            <h5>Batting Score</h5>
            <table class="table table-hover data-table col-lg-10 col-md-8">
                <thead>
                    <tr>
                        <th></th>
                        <th class="col-lg-2 col-md-2">Batsman</th>
                        <th style="width:10px;">How Out</th>
                        <th class="col-lg-2 col-md-2">Bowler</th>
                        <th>Runs</th>
                        <th>Balls</th>
                        <th>4s</th>
                        <th>6s</th>
                        <th>Wicket#</th>
                        <th>FOW Runs</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="i in [] | range:11">
                        <td>{{i+1}}</td>
                        <td>
                            <div class='container-fluid has-error'>
                                <input class="has-error" type="text" ng-model="BattingScore[i].Batsman" empty-typeahead typeahead-editable="false" ng-blur="clearUnselected(i)" typeahead="player as player.FullName for player in HomePlayers  | filter:$viewValue:PlayerComparer">
                            </div>
                        </td>
                        <td><input type="text" ng-model="BattingScore[i].HowOut" ng-blur="clearUnselected(i)" typeahead-editable="false" typeahead="out as out.Type for out in OutList  | filter:$viewValue" style="width:120px;" /></td>
                        <td><input type="text" ng-model="BattingScore[i].Bowler" ng-blur="clearUnselected(i)" empty-typeahead typeahead-editable="false" typeahead="player as player.FullName for player in AwayPlayers  | filter:$viewValue:PlayerComparer" /></td>
                        <td><input type="text" ng-model="BattingScore[i].Runs" numbers-only="numbers-only" class="number-box" /></td>
                        <td><input type="number" ng-model="BattingScore[i].Balls" class="number-box" /></td>
                        <td><input type="number" ng-model="" class="number-box" /></td>
                        <td><input type="number" ng-model="" class="number-box" /></td>
                        <td><input type="number" ng-model="BattingScore[i].WicketNumber" class="number-box" /></td>
                        <td><input type="number" ng-model="BattingScore[i].FOWRuns" class="number-box" /></td>
                    </tr>
                </tbody>
            </table>
            <div>
                <h5>Extras Received</h5>

                <table class="table table-hover data-table col-lg-5 col-md-8">
                    <thead>
                        <tr>
                            <th>Wides</th>
                            <th>No Balls</th>
                            <th>Byes</th>
                            <th>Leg Byes</th>
                            <th>Penalty</th>
                            <th>Total Extras</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><input type="number" ng-model="HTWides" class="number-box"></td>
                            <td><input type="number" ng-model="HTNoBalls" class="number-box"></td>
                            <td><input type="number" ng-model="HTByes" class="number-box"></td>
                            <td><input type="number" ng-model="HTLegByes" class="number-box"></td>
                            <td><input type="number" ng-model="HTPenaltyRuns" class="number-box"></td>
                            <td class="text-left">{{HTWides + HTNoBalls + HTByes + HTLegByes + HTPenaltyRuns}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div>
                <h5>Bowling Score</h5>
            </div>
            <table class="table table-hover data-table">
                <thead>
                    <tr>
                        <th></th>
                        <th>Bowler</th>
                        <th>Over</th>
                        <th>Maiden</th>
                        <th>Runs</th>
                        <th>Wickets</th>
                        <th>WD</th>
                        <th>NB</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="i in [] | range:10">
                        <td>{{i+1}}</td>
                        <td>
                            <div class='container-fluid'>
                                <input type="text" ng-model="BowlingScore[i].Bowler" typeahead="player as player.FullName for player in HomePlayers  | filter:$viewValue|limitTo:10">
                            </div>
                        </td>
                        <td><input type="number" ng-model="BowlingScore[i].Overs" class="number-box" /></td>
                        <td><input type="number" ng-model="BowlingScore[i].Maiden" class="number-box" /></td>
                        <td><input type="number" ng-model="BowlingScore[i].RunsGiven" class="number-box" /></td>
                        <td><input type="number" ng-model="BowlingScore[i].Wickets" class="number-box" /></td>
                        <td><input type="number" ng-model="BowlingScore[i].Wide" class="number-box" /></td>
                        <td><input type="number" ng-model="BowlingScore[i].NoBalls" class="number-box" /></td>
                    </tr>
                </tbody>
            </table>

            <hr />
            <div>
                <button type="button" class="btn btn-primary" ng-click="SubmitMatchScore()">Submit Match Score</button>
            </div>
        </div>
    </div>
</div>

